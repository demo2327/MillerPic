aws_region       = "us-east-1"
environment      = "dev"
project_name     = "millerpic"
s3_bucket_prefix = "millerpic-photos"
lambda_artifacts_bucket_name = "millerpic-lambda-artifacts-<account-id>-us-east-1"
lambda_signing_profile_name  = "millerpiclambdasignerdev"

enable_jwt_auth                   = true
load_sensitive_config_from_secrets = true
# Optional override when your bootstrap secret uses a custom name.
# sensitive_config_secret_name = "millerpic/dev/app-sensitive-config"

enable_cost_protection                        = true
enable_sns_alert_topic                        = true
enable_aws_budgets                            = true
monthly_cost_budget_usd                       = 25
monthly_cost_forecast_alert_threshold_percent = 80

api_throttle_rate_limit  = 20
api_throttle_burst_limit = 40

lambda_reserved_concurrency_per_function = 10
download_url_ttl_seconds                 = 900

api_4xx_alarm_threshold           = 200
api_5xx_alarm_threshold           = 20
api_request_count_alarm_threshold = 5000
lambda_errors_alarm_threshold     = 5
lambda_throttles_alarm_threshold  = 1
alarm_period_seconds              = 300
alarm_evaluation_periods          = 1

lambda_artifact_object_keys = {
  upload          = "signed/upload.zip"
  download        = "signed/download.zip"
  list            = "signed/list.zip"
  upload_complete = "signed/upload_complete.zip"
  delete          = "signed/delete.zip"
  trash           = "signed/trash.zip"
  hard_delete     = "signed/hard_delete.zip"
  patch_photo     = "signed/patch_photo.zip"
  search          = "signed/search.zip"
  get_photo       = "signed/get_photo.zip"
  albums_create        = "signed/albums_create.zip"
  albums_list          = "signed/albums_list.zip"
  albums_photos        = "signed/albums_photos.zip"
  albums_apply_labels  = "signed/albums_apply_labels.zip"
  albums_remove_labels = "signed/albums_remove_labels.zip"
}

# Populate from generated signing output before each Lambda deployment.
# lambda_artifact_object_versions = {
#   upload          = "<S3-version-id>"
#   download        = "<S3-version-id>"
#   list            = "<S3-version-id>"
#   upload_complete = "<S3-version-id>"
#   delete          = "<S3-version-id>"
#   trash           = "<S3-version-id>"
#   hard_delete     = "<S3-version-id>"
#   patch_photo     = "<S3-version-id>"
#   search          = "<S3-version-id>"
#   get_photo       = "<S3-version-id>"
#   albums_create        = "<S3-version-id>"
#   albums_list          = "<S3-version-id>"
#   albums_photos        = "<S3-version-id>"
#   albums_apply_labels  = "<S3-version-id>"
#   albums_remove_labels = "<S3-version-id>"
# }

tags = {
  Project     = "MillerPic"
  Environment = "dev"
  ManagedBy   = "Terraform"
}
